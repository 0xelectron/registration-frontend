<div class="container">
<span ng-show="saving" class="spinner-class">
</span>
<div class="row">
<div class="panel panel-primary" style="margin:20px;">
	<div class="panel-heading">
        	<h3 class="panel-title">Registration Form</h3>
	</div>
<div class="panel-body">
    <form name="registerForm" ng-submit="$ctrl.register()" novalidate>
<div class="col-md-12 col-sm-12">

	<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.gender.$invalid && registerForm.$submitted}">
	      <label for="gender">Gender*</label>  
	      <div class="btn-group" id="gender">
			<label ng-model="$ctrl.user.gender" name="gender" class="btn btn-success btn-lg" uib-btn-radio="'male'" ng-required="!$ctrl.user.gender" ng-change="$ctrl.getEventAndRoleDetails()"><i class="fa fa-male" aria-hidden="true"></i></label>
			<label class="btn btn-success btn-lg" name="gender" ng-model="$ctrl.user.gender" uib-btn-radio="'female'" ng-required="!$ctrl.user.gender" ng-change="$ctrl.getEventAndRoleDetails()"><i class="fa fa-female" aria-hidden="true"></i></label>
		  </div>
		  <span ng-show="registerForm.gender.$invalid && registerForm.$submitted" class="help-block">Please select.</span>
	    </div>
	
	<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.first_name.$invalid && registerForm.$submitted}">
            <label for="first_name">First Name*	</label>
            <input type="text" class="form-control input-sm" id="first_name" name="first_name" placeholder="" ng-model="$ctrl.user.first_name" ng-required="true">
			<span ng-show="registerForm.first_name.$invalid && registerForm.$submitted" class="help-block">First name is required.</span>
        </div>
        <div class="form-group col-md-12 col-sm-12"  ng-class="{ 'has-error' : registerForm.last_name.$invalid && registerForm.$submitted}">
            <label for="last_name">Last Name*</label>
            <input type="text" class="form-control input-sm" id="last_name" name="last_name" placeholder="" ng-model="$ctrl.user.last_name" ng-required="true">
			<span ng-show="registerForm.last_name.$invalid && registerForm.$submitted" class="help-block">Last name is required.</span>
        </div>

		
        <div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.date_of_birth.$invalid && registerForm.$submitted}">
            <label for="date_of_birth">Date of Birth*</label>
			<p class="input-group">
			  <input type="text" id="date_of_birth" name="date_of_birth" class="form-control" ng-change="$ctrl.getEventAndRoleDetails()" uib-datepicker-popup="{{$ctrl.format}}" ng-model="$ctrl.user.date_of_birth" is-open="$ctrl.popup1.opened" datepicker-options="$ctrl.dateOptions" ng-required="true" close-text="Close" alt-input-formats="$ctrl.altInputFormats" ng-required="true"/>
			  <span class="input-group-btn">
				<button type="button" class="btn btn-default" ng-click="$ctrl.open1()"><i class="glyphicon glyphicon-calendar"></i></button>
			  </span>
			</p>	
			<span ng-show="registerForm.date_of_birth.$invalid && registerForm.$submitted" class="help-block">Date of birth is required.</span>
		</div>
		
	<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.mobile.$invalid && registerForm.$submitted}">
            <label for="mobile">Mobile*</label>
            <input type="tel" class="form-control input-sm" id="mobile" name="mobile" placeholder="" ng-model="$ctrl.user.mobile" ng-required="true" ng-minlength="10" 
                   ng-maxlength="10">			
			 <span ng-show="registerForm.mobile.$invalid && registerForm.$submitted" class="help-block">Please enter a valid mobile number.</span>
        </div>

	<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.email.$invalid && registerForm.$submitted}">
            <label for="email">Email</label> 
            <input type="email" class="form-control input-sm" id="email" name="email" placeholder="" ng-model="$ctrl.user.email">
			<span ng-show="registerForm.email.$invalid && registerForm.$submitted" class="help-block">Please enter a valid email.</span>
        </div>
		
	<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.center.$invalid && registerForm.$submitted}">
            <label for="center">Home City*</label>
			<select class="form-control" name="center" data-ng-options="t.id as t.name for t in $ctrl.centers" data-ng-model="$ctrl.user.center" ng-required="true"></select>
			<span ng-show="registerForm.center.$invalid && registerForm.$submitted" class="help-block">Please select your home city.</span>
        </div>
		
	<div class="form-group col-md-12 col-sm-12" ng-if="$ctrl.user.center === $ctrl.other_center" ng-class="{ 'has-error' : registerForm.other_center.$invalid && registerForm.$submitted}">
            <label for="other_center">City</label> 
			<input type="text" class="form-control input-sm" id="other_center" name="other_center" placeholder="" ng-model="$ctrl.user.other_center" ng-required="$ctrl.user.center === $ctrl.other_center">
			<span ng-show="registerForm.other_center.$invalid && registerForm.$submitted" class="help-block">Please enter city name.</span>
        </div>
	
	
	<div class="form-group col-md-12 col-sm-12"  ng-class="{ 'has-error' : registerForm.father_name.$invalid && registerForm.$submitted}">
            <label for="father_name">Father's Name</label> 
            <input type="text" class="form-control input-sm" id="father_name" name="father_name" placeholder="" ng-model="$ctrl.user.father_name" ng-required="true">			
			<span ng-show="registerForm.father_name.$invalid && registerForm.$submitted" class="help-block">Please enter father's name.</span>
        </div>
		
	<div class="form-group col-md-12 col-sm-12" ng-show="$ctrl.user.age < 13">
            <label for="mother_name">Mother's Name</label>
            <input type="text" class="form-control input-sm" id="mother_name" placeholder="" ng-model="$ctrl.user.mother_name">
        </div>
	
		
	<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.father_mobile.$invalid && registerForm.$submitted}">
            <label for="father_mobile">Father's Mobile</label> 
            <input type="tel" class="form-control input-sm" id="father_mobile" name="father_mobile" placeholder="" ng-model="$ctrl.user.father_mobile" ng-required="true" ng-minlength="10" 
                   ng-maxlength="10">
			<span ng-show="registerForm.father_mobile.$invalid && registerForm.$submitted" class="help-block">Please enter a valid mobile.</span> 
        </div>
		
	<div class="form-group col-md-12 col-sm-12" ng-show="$ctrl.user.age < 13">
            <label for="mother_mobile">Mother's Mobile</label>
            <input type="tel" class="form-control input-sm" id="mother_mobile" placeholder="" ng-model="$ctrl.user.mother_mobile">
        </div>
	
	<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.big_buddy.$invalid && registerForm.$submitted}" ng-show="$ctrl.user.age > 12 && $ctrl.user.gender==='male'">
            <label for="big_buddy">Big Buddy*	</label>
            <input type="text" class="form-control input-sm" id="big_buddy" name="big_buddy" placeholder="" ng-model="$ctrl.user.big_buddy" ng-required="$ctrl.user.age > 12 && $ctrl.user.gender==='male'">
			<span ng-show="registerForm.big_buddy.$invalid && registerForm.$submitted" class="help-block">Buddy name is required.</span>
        </div>
        <div class="form-group col-md-12 col-sm-12"  ng-class="{ 'has-error' : registerForm.goal_achievement.$invalid && registerForm.$submitted}" ng-show="$ctrl.user.age > 12 && $ctrl.user.gender==='male'">
            <label for="goal_achievement">Goal Achievment*</label>
            <input type="text" class="form-control input-sm" id="goal_achievement" name="goal_achievement" placeholder="" ng-model="$ctrl.user.goal_achievement" ng-required="$ctrl.user.age > 12 && $ctrl.user.gender==='male'">
			<span ng-show="registerForm.goal_achievement.$invalid && registerForm.$submitted" class="help-block">Goal Achievement is required.</span>
        </div>
	
	
</div>

<div class="form-group col-md-12 col-sm-12" ng-if="$ctrl.roleEnabled">
			<div class="form-group col-md-12 col-sm-12" ng-class="{ 'has-error' : registerForm.role.$invalid && registerForm.$submitted}">
			<label for="mother_mobile">As a</label>
			 <div ng-repeat="role in $ctrl.roles" class="btn-group">
				<label name="role" class="btn btn-success" ng-model="$ctrl.user.role" uib-btn-radio="'{{role.name}}'" ng-required="!$ctrl.user.role && $ctrl.roleEnabled">{{role.name}}</label>
			</div>
			<span ng-show="registerForm.role.$invalid && registerForm.$submitted" class="help-block">Please select a role.</span>
			</div> 
        </div>
<span ng-class="has-error" ng-show="(!$ctrl.validEvents || $ctrl.validEvents.length < 1) && registerForm.$submitted" class="help-block">No events available.</span>
<div class="col-md-12 col-sm-12 panel panel-primary" ng-if="$ctrl.validEvents.length > 0"> 
<span ng-show="(!$ctrl.user.events || $ctrl.user.events.length < 1) && registerForm.$submitted" class="help-block">Please select an event.</span>
<div class="panel-heading">
        	<h3 class="panel-title">Event Details</h3>
	</div>
<div class="panel-body">
 <div class="form-group col-md-12 col-sm-12 checkbox checkbox-success" ng-repeat="event in $ctrl.validEvents">
                        <input class="col-sm-3" type="checkbox" id="{{event.name}}" value="{{event.name}}" name="event_name" ng-click="$ctrl.addEvent(event)" ng-model="event.selected"/>
                        <label class="col-sm-3" for="{{event.name}}"> {{event.name}} </label>
						<input class="col-sm-3" type="checkbox" id="{{event.accomodation}}" value="{{event.accomodation}}" name="event_accomodation" ng-click="$ctrl.addAccomodation(event)" ng-if="event.accomodation && event.selected" ng-model="event.require_accomodation"/>
                        <label class="col-sm-3" for="{{event.accomodation}}" ng-if="event.accomodation"> Utaro - {{event.name}} </label>
                    </div>
					</div>
					</div>
<div class="col-md-12 col-sm-12">
	<div class="form-group col-md-3 col-sm-3" >
			<input type="submit" class="btn btn-primary" value="Register"/>
	</div>
	</div>
</form>
</div>
</div>
</div>